const appName="billing";let typeInput=null,validFields={RFC:!1,"business-name":!1,"payment-code":!1,zipcode:!1,"business-line":!1,"phone-new":!1,address:!1,number:!1,"number-dep":!1,neighborhood:!1,city:!1},validFieldsNormal={RFC:!1,"business-name":!1,"payment-code":!1,zipcode:!1};const fields=[{label:"RFC",name:"RFC",isRequired:!0,type:"text",regex:"^[A-Z0-9]{12}$",message:"Se debe escribir en mayúsculas y sin espacios ni guiones, Debe incluir homoclave, consta de 12 dígitos",uppercase:!0},{label:"Razón social",name:"business-name",isRequired:!0,type:"text",regex:"^[A-ZÑ ]+$",message:"Se debe escribir en mayúsculas y sin acentos, sin incluir régimen societario o de capital, respetando puntuación."},{label:"Método de pago",name:"payment-code",isRequired:!0,type:"select",options:["01-Efectivo","02-Cheque nominativo","03-Transferencia eléctronica de fondos","04-Tarjeta de crédito","05-Monedero Electrónico","06-Dinero Electrónico","08-Vales de despensa","12-Dación de pagos","13-Pago por subrogación","14-Pago por consignación","15-Condonación","17-Compensación","23-Novación","24-Confusión","25-Remisión de deuda","26-Prescripción o caducidad","27-A satisfacción de acreedor","28-Tarjeta de débito","29-Tarjeta de servicios","30-Aplicación de anticipos","31-Intermediario pagos","99-Por definir"]},{label:"Código Postal",name:"zipcode",isRequired:!0,type:"text",message:"consta de un número de 5 dígitos.",regex:"^.{5}$"},{label:"Datos complementarios",type:"label"},{label:"Línea de negocio o giro",name:"business-line",isRequired:!1,type:"text"},{label:"Número teléfono",name:"phone-new",isRequired:!1,type:"text"},{label:"Dirección",name:"address",isRequired:!1,type:"text"},{label:"Número",name:"number",isRequired:!1,type:"text"},{label:"Número de departamento",name:"number-dep",isRequired:!1,type:"text"},{label:"Colonia",name:"neighborhood",isRequired:!1,type:"text"},{label:"Ciudad",name:"city",isRequired:!1,type:"text"}],fieldsNormal=[{label:"RFC",name:"RFC",isRequired:!0,type:"text",regex:"^[A-Z0-9]{13}$",message:"Se debe escribir en mayúsculas y sin espacios ni guiones, Debe incluir homoclave, consta de 13 dígitos"},{label:"Razón social",name:"business-name",isRequired:!0,regex:"^[A-ZÑ ]+$",type:"text",message:"Se debe escribir en mayúsculas y sin acentos, sin incluir régimen societario o de capital, respetando puntuación."},{label:"Código Postal",name:"zipcode",isRequired:!0,regex:"^.{5}$",type:"text",message:"consta de un número de 5 dígitos."},{label:"Método de pago",name:"payment-code",isRequired:!1,type:"select",options:["01-Efectivo","02-Cheque nominativo","03-Transferencia eléctronica de fondos","04-Tarjeta de crédito","05-Monedero Electrónico","06-Dinero Electrónico","08-Vales de despensa","12-Dación de pagos","13-Pago por subrogación","14-Pago por consignación","15-Condonación","17-Compensación","23-Novación","24-Confusión","25-Remisión de deuda","26-Prescripción o caducidad","27-A satisfacción de acreedor","28-Tarjeta de débito","29-Tarjeta de servicios","30-Aplicación de anticipos","31-Intermediario pagos","99-Por definir"]}],FIELD_CFDI=[{label:"Código CFDI",name:"cfdi-code",isRequired:!0,type:"select",options:["G01-Adquisición de mercancías","G02-Devoluciones descuentos o bonificaciones","G03-Gastos en general","I01-Construcciones","I02-Mobilario y equipo de oficina por inversiones","I03-Equipo de transporte","I04-Equipo de cómputo y accesorios","I05-Dados, troqueles, moldes, matrices y herramental","I06-Comunicaciones telefónicas","I07-Comunicaciones satelitales","I08-Otra maquinaria y equipo","D01-Honorarios médicos, dentales y gastos hospitalarios","D02-Gastos médicos por incapacidad o discapacidad","D03-Gastos funerales","D04-Donativos","D05-Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación)","D06-Aportaciones voluntarias al SAR","D07-Primas por seguros de gastos médicos","D08-Gastos de transportación escolar obligatoria","D09-Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones","D10-Pagos por servicios educativos (colegiaturas)","P01-Por definir","S01-Sin Efectos Fiscales","CP01-Pagos","CN01-Nómina"],suboptions:[["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas Físicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-Régimen de Enajenación o Adquisición de Bienes","615-Régimen de los ingresos por obtención de premios","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","610-Residentes en el Extranjero sin Establecimiento Permanente en México","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","616-Sin obligaciones fiscales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","624-Coordinados","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Demás ingresos","610-Residentes en el Extranjero sin Establecimiento Permanente en México","611-Ingresos por Dividendos (socios y accionistas)","612-Personas Físicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","616-Sin obligaciones fiscales","620-Sociedades Cooperativas de Producción que optan por diferir sus ingresos","621-Incorporación Fiscal","622-Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras","623-Opcional para Grupos de Sociedades","624-Coordinados","625-Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas","626-Régimen Simplificado de Confianza"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios"]]}];window.onload=function(){onMutation(),setTimeout((()=>{onDefaultInformation()}),2e3)};const onDefaultInformation=()=>{if(vtexjs){const e=vtexjs?.checkout?.orderForm?.storePreferencesData?.countryCode;(vtexjs?.checkout?.orderForm?.customData?.customApps||[]).length||(vtexjs.checkout.setCustomData({field:"isCorporateOms",app:appName,value:"false"}),vtexjs.checkout.setCustomData({field:"Country-Code",app:appName,value:e}),vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:"false"}),vtexjs.checkout.setCustomData({field:"state",app:appName,value:e}))}},onMutation=()=>{const e=document.querySelector("body");new MutationObserver((e=>{try{onAttachmentB2BButton()}catch(e){}})).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})};$(document).ready((function(){setTimeout((()=>{sessionStorage.getItem("b2b-form-complete")||(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:"false"}))}),1e3)})),$(window).on("hashchange",(function(e){setTimeout((()=>{"#/profile"===window?.location?.hash&&$("#b2b-form-container").length&&(console.log("remove function"),$("#b2b-form-container").remove(),$(".container-custom-data-form").remove(),$("#button-b2b-form").remove(),$("#b2b-form-container").remove()),"#/profile"===window?.location?.hash&&(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:"false"}))}),1e3)}));const onAttachmentB2BButton=()=>{const profileContainer=$(".form-step.box-edit > .box-client-info > .row-fluid"),b2bButton=$("#b2b-form-container");profileContainer&&profileContainer.length&&!b2bButton.length&&"#/profile"===window?.location?.hash&&("#/profile"===window?.location?.hash&&(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:"false"})),$(".corporate-hide-link").css("display","none"),$(".form-step.box-edit > .box-client-info > .row-fluid").append('\n            <div id="b2b-form-container">\n                <div>\n                    <span>¿Requieres Factura?</span>\n                    <div style="display:flex;margin-top:10px">\n                        <p style="display:flex;align-items: center;">\n                            <input type="radio" id="CFDI-si" value="true" name="cfdi" style="margin-top: 0"/>\n                            <label for="CFDI-si" style="line-height: 3px;margin-left: 5px;">Si</label>\n                        </p>\n                        <p style="display:flex;align-items: center;margin-left: 15px;">\n                            <input type="radio" id="CFDI-no" value="false" name="cfdi" style="margin-top: 0"/>\n                            <label for="CFDI-no" style="line-height: 3px;margin-left: 5px;">No</label>\n                        </p>\n                    </div>\n                </div>\n            </div>\n \n        '),$("#CFDI-no").click(),$('input[name="cfdi"]').change((function(){if($(this).is(":checked")){var val=eval($(this).val());const buttonb2bform=$("#button-b2b-form");if(vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:val}),val){$("#go-to-shipping, #go-to-payment").prop("disabled",!0);const fieldsToMap=FIELD_CFDI.map((e=>`<p class="${e.name} input text containerInputCustom">\n                        <label for="${e.name}"  class="labelInputCustom">${e.label}</label>\n                        <select name="${e.name}" id="${e.name}" onChange="onChangeB2bCFDI('${e.name}')">\n                            <option disabled selected>Seleccione</option>\n                          ${e.options.map((e=>`<option value="${e}">${e}</option>`))}\n                        </select>\n                      </p>`));setTimeout((()=>{$("#b2b-form-container").after(`<div class="container-custom-data-form">\n                            ${fieldsToMap.toString().replace(/,/g,"")}\n                            <p class="tax-regime input text containerInputCustom">\n                                <label for="tax-regime"  class="labelInputCustom">Régimen Fiscal</label>\n                                <select name="tax-regime" id="tax-regime" onChange="onChangeB2bRegimen('tax-regime')">\n                                    <option disabled selected>Seleccione</option>\n                                </select>\n                            </p>\n                        </div>`)}),100),buttonb2bform&&buttonb2bform.length?$("#button-b2b-form").html('\n                            <div class="container-custom-data-form-facturacion">\n                                <span>¿Tipo de persona?</span>\n                                <div style="display:flex;margin-top:10px">\n                                    <p style="display:flex;align-items: center;">\n                                        <input type="radio" id="corporative-si" value="true" name="corporative" style="margin-top: 0"/>\n                                        <label for="corporative-si" style="line-height: 3px;margin-left: 5px;">Moral</label>\n                                    </p>\n                                    <p style="display:flex;align-items: center;margin-left: 15px;">\n                                        <input type="radio" id="corporative-no" value="false" name="corporative" style="margin-top: 0"/>\n                                        <label for="corporative-no" style="line-height: 3px;margin-left: 5px;">Física</label>\n                                    </p>\n                                </div>\n                            </div>\n                        '):$("#b2b-form-container").after('\n                            <div id="button-b2b-form" style="margin-top:10px;cursor:pointer">\n                                <div>\n                                    <span>¿Tipo de persona?</span>\n                                    <div style="display:flex;margin-top:10px">\n                                        <p style="display:flex;align-items: center;">\n                                            <input type="radio" id="corporative-si" value="true" name="corporative" style="margin-top: 0"/>\n                                            <label for="corporative-si" style="line-height: 3px;margin-left: 5px;">Moral</label>\n                                        </p>\n                                        <p style="display:flex;align-items: center;margin-left: 15px;">\n                                            <input type="radio" id="corporative-no" value="false" name="corporative" style="margin-top: 0"/>\n                                            <label for="corporative-no" style="line-height: 3px;margin-left: 5px;">Física</label>\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        '),$('input[name="corporative"]').change((function(){if($(this).is(":checked")){var val=eval($(this).val());vtexjs.checkout.setCustomData({field:"isCorporateOms",app:appName,value:val}),typeInput=val?"Moral":"Fisica",$(".container-custom-data-form-element").remove(),val?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),resetInformation(),vtexjs.checkout.setCustomData({field:"isCorporateOms",app:appName,value:"true"}),setFormCustom()):($("#go-to-shipping, #go-to-payment").prop("disabled",!0),resetInformation(),vtexjs.checkout.setCustomData({field:"isCorporateOms",app:appName,value:"false"}),setFormCustomDefault())}}))}else $("#go-to-shipping, #go-to-payment").prop("disabled",!1),$("#button-b2b-form").length&&$("#button-b2b-form").remove(),$(".container-custom-data-form").remove(),removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),vtexjs.checkout.setCustomData({field:"CFDI-required",app:appName,value:"false"})}})))},resetInformation=()=>{removeCustomData("zipcode"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC")},setFormCustomDefault=()=>{"#/profile"===window.location.hash&&setTimeout((()=>{const e=$("#button-b2b-form"),a=$(".container-custom-data-form-element");if(e.length){const s=fieldsNormal.map((e=>"select"===e.type?`<p class="${e.name} input text containerInputCustom">\n                <label for="${e.name}"  class="labelInputCustom">${e.label}</label>\n                <select name="${e.name}" id="${e.name}" onChange="onChangeB2b('${e.name}')">\n                    <option disabled selected>Seleccione</option>\n                  ${e.options.map((e=>`<option value="${e}">${e}</option>`))}\n                </select>\n              </p>`:`<p class="${e.name} input text containerInputCustom">\n              <label for="${e.name}"  class="labelInputCustom">${e.label}</label>\n              <input type="${e.type}" autocomplete="off" id="${e.name}" class="input-xlarge" name="${e.name}" onBlur="onBlurB2bForm('${e.name}')"/>\n              <span class="input-b2b-error"></span>\n              ${e?.message?`<span>${e?.message}</span>`:""}\n            </p>`));a&&a.length?$(".container-custom-data-form-element").html(s.toString().replace(/,/g,"")):e.append(`<div class="container-custom-data-form-element FISICA">${s.toString().replace(/,/g,"")}</div>`)}}),500)},setFormCustom=()=>{"#/profile"===window.location.hash&&setTimeout((()=>{const e=$("#button-b2b-form"),a=$(".container-custom-data-form-element");if(console.log("corporateInfoBox",e.length,a.length),e.length){const s=fields.map((e=>"select"===e.type?`<p class="${e.name} input text containerInputCustom">\n                <label for="${e.name}"  class="labelInputCustom">${e.label}</label>\n                <select name="${e.name}" id="${e.name}" onChange="onChangeB2b('${e.name}')">\n                    <option disabled selected>Seleccione</option>\n                  ${e.options.map((e=>`<option value="${e}">${e}</option>`))}\n                </select>\n              </p>`:"label"===e.type?`\n                            <p class="${e.label} input text containerInputCustom">\n                                <label>${e.label}</label>\n                            </p>\n                        `:`<p class="${e.name} input text containerInputCustom">\n              <label for="${e.name}"  class="labelInputCustom">${e.label}</label>\n              <input type="${e.type}" autocomplete="off" id="${e.name}" class="input-xlarge" name="${e.name}" onBlur="onBlurB2bForm('${e.name}')"/>\n              <span class="input-b2b-error"></span>\n              ${e?.message?`<span>${e?.message}</span>`:""}\n            </p>`));a&&a.length?$(".container-custom-data-form-element").html(s.toString().replace(/,/g,"")):e.append(`<div class="container-custom-data-form-element MORAL">${s.toString().replace(/,/g,"")}</div>`)}}),500)},onChangeB2bRegimen=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;if(s&&vtexjs.checkout.setCustomData({field:e,app:appName,value:s.split("-")[0]}),"Moral"===typeInput){fields.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val()))}))?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}else{fieldsNormal.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val()))}))?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}},onChangeB2bCFDI=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;$("#corporative-si").is(":checked"),$("#corporative-no").is(":checked");if(s){function o(e){return e.trim().normalize("NFD").replace(/,/gi,"").normalize()}const i=FIELD_CFDI[0].options.findIndex((e=>o(e)===o(s))),n=FIELD_CFDI[0].suboptions[i];console.log("selectedElement",i,FIELD_CFDI[0],n,s,FIELD_CFDI[0].options);const r=n.map((e=>`<option value="${e}">${e}</option>`));if($("#tax-regime").html(`\n            <option disabled selected>Seleccione</option>\n            ${r.join("")}\n        `),vtexjs.checkout.setCustomData({field:e,app:appName,value:s.split("-")[0]}),"Moral"===typeInput){fields.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val()))}))?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}else{fieldsNormal.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val()))}))?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}}},onChangeB2b=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;s&&vtexjs.checkout.setCustomData({field:e,app:appName,value:s.split("-")[0]})},onValidateInput=e=>{console.log("value",e)},onValidateButton=()=>{"Moral"===type?console.log("validFields",validFields):console.log("validFieldsNormal",validFieldsNormal)},onBlurB2bForm=e=>{$("#go-to-shipping");const a=$(`#${e}`),s=fields.find((a=>a.name===e))?.type,o=fields.find((a=>a.name===e))?.isRequired;if("checkbox"===s){$("#CFDI-required").is(":checked")?vtexjs.checkout.setCustomData({field:e,app:appName,value:"true"}):(a.length&&!$(`.${e} .errorCustom`).length&&o&&$(`.${e}`).append('<div class="help error errorCustom">Este campo es obligatorio</div>'),vtexjs.checkout.setCustomData({field:e,app:appName,value:"false"}))}else{const s=a.val(),i=$(`.${e} .errorCustom`);if(s){if(i.length&&i.hide(),"Moral"===typeInput){const a=fields.some((a=>{const s=new RegExp(a.regex);return!(a.name!==e||!a.regex||s.test($(`#${a.name}`).val()))||!(a.name===e&&!a.isRequired)&&(a.name===e&&!$(`#${a.name}`).val())}));fields.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val()))}))?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),a?$(`#${e} + .input-b2b-error`).html('<span style="color: red">Campo incompleto</span><br/>'):$(`#${e} + .input-b2b-error`).html("")}else{const a=fieldsNormal.some((a=>{const s=new RegExp(a.regex);return!(a.name!==e||!a.regex||s.test($(`#${a.name}`).val()))||!(a.name===e&&!a.isRequired)&&(a.name===e&&!$(`#${a.name}`).val())})),s=fieldsNormal.some((e=>{const a=new RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||(!o||(!(!e.regex||a.test($(`#${e.name}`).val()))||!!e.isRequired&&!$(`#${e.name}`).val()))}));console.log("isGeneralError ",s),s?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),a?$(`#${e} + .input-b2b-error`).html('<span style="color: red">Campo incompleto</span><br/>'):$(`#${e} + .input-b2b-error`).html("")}vtexjs.checkout.setCustomData({field:e,app:appName,value:s})}else{const s=fields.some((e=>{const a=new RegExp(e.regex);return console.log("regexTest",e.regex),!!e.isRequired&&(!(!e.regex||a.test($(`#${e.name}`).val()))||!$(`#${e.name}`).val())}));a.length&&!$(`.${e} .errorCustom`).length&&o&&$(`.${e}`).append('<div class="help error errorCustom">Este campo es obligatorio</div>'),s?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),removeCustomData(e)}}},validateErrors=()=>fields.map((e=>{const a=e.name,s=e.isRequired,o=$(`#${a}`).val();return!!s&&!o})).some((function(e){return!0===e})),removeCustomData=e=>{const a=vtexjs?.checkout?.orderFormId;fetch(`/api/checkout/pub/orderForm/${a}/customData/${appName}/${e}`,{method:"DELETE"})};