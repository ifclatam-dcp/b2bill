const appName="billing";let typeInput=null,validFields={RFC:!1,"business-name":!1,"payment-code":!1,zipcode:!1,"business-line":!1,"phone-new":!1,address:!1,number:!1,"number-dep":!1,neighborhood:!1,city:!1},validFieldsNormal={RFC:!1,"business-name":!1,"payment-code":!1,zipcode:!1};const fields=[{label:"RFC",name:"RFC",isRequired:!0,type:"text",regex:"^[A-Z0-9]{12}$",message:"Se debe escribir en may\xfasculas y sin espacios ni guiones, Debe incluir homoclave, consta de 12 d\xedgitos",uppercase:!0},{label:"Raz\xf3n social",name:"business-name",isRequired:!0,type:"text",regex:"^[A-Z\xd1 ]+$",message:"Se debe escribir en may\xfasculas y sin acentos, sin incluir r\xe9gimen societario o de capital, respetando puntuaci\xf3n."},{label:"M\xe9todo de pago",name:"payment-code",isRequired:!0,type:"select",options:["01-Efectivo","02-Cheque nominativo","03-Transferencia el\xe9ctronica de fondos","04-Tarjeta de cr\xe9dito","05-Monedero Electr\xf3nico","06-Dinero Electr\xf3nico","08-Vales de despensa","12-Daci\xf3n de pagos","13-Pago por subrogaci\xf3n","14-Pago por consignaci\xf3n","15-Condonaci\xf3n","17-Compensaci\xf3n","23-Novaci\xf3n","24-Confusi\xf3n","25-Remisi\xf3n de deuda","26-Prescripci\xf3n o caducidad","27-A satisfacci\xf3n de acreedor","28-Tarjeta de d\xe9bito","29-Tarjeta de servicios","30-Aplicaci\xf3n de anticipos","31-Intermediario pagos","99-Por definir"]},{label:"C\xf3digo Postal",name:"zipcode",isRequired:!0,type:"text",message:"consta de un n\xfamero de 5 d\xedgitos.",regex:"^.{5}$"},{label:"Datos complementarios",type:"label"},{label:"L\xednea de negocio o giro",name:"business-line",isRequired:!1,type:"text"},{label:"N\xfamero tel\xe9fono",name:"phone-new",isRequired:!1,type:"text"},{label:"Direcci\xf3n",name:"address",isRequired:!1,type:"text"},{label:"N\xfamero",name:"number",isRequired:!1,type:"text"},{label:"N\xfamero de departamento",name:"number-dep",isRequired:!1,type:"text"},{label:"Colonia",name:"neighborhood",isRequired:!1,type:"text"},{label:"Ciudad",name:"city",isRequired:!1,type:"text"}],fieldsNormal=[{label:"RFC",name:"RFC",isRequired:!0,type:"text",regex:"^[A-Z0-9]{13}$",message:"Se debe escribir en may\xfasculas y sin espacios ni guiones, Debe incluir homoclave, consta de 13 d\xedgitos"},{label:"Raz\xf3n social",name:"business-name",isRequired:!0,regex:"^[A-Z\xd1 ]+$",type:"text",message:"Se debe escribir en may\xfasculas y sin acentos, sin incluir r\xe9gimen societario o de capital, respetando puntuaci\xf3n."},{label:"C\xf3digo Postal",name:"zipcode",isRequired:!0,regex:"^.{5}$",type:"text",message:"consta de un n\xfamero de 5 d\xedgitos."},{label:"M\xe9todo de pago",name:"payment-code",isRequired:!1,type:"select",options:["01-Efectivo","02-Cheque nominativo","03-Transferencia el\xe9ctronica de fondos","04-Tarjeta de cr\xe9dito","05-Monedero Electr\xf3nico","06-Dinero Electr\xf3nico","08-Vales de despensa","12-Daci\xf3n de pagos","13-Pago por subrogaci\xf3n","14-Pago por consignaci\xf3n","15-Condonaci\xf3n","17-Compensaci\xf3n","23-Novaci\xf3n","24-Confusi\xf3n","25-Remisi\xf3n de deuda","26-Prescripci\xf3n o caducidad","27-A satisfacci\xf3n de acreedor","28-Tarjeta de d\xe9bito","29-Tarjeta de servicios","30-Aplicaci\xf3n de anticipos","31-Intermediario pagos","99-Por definir"]}],FIELD_CFDI=[{label:"C\xf3digo CFDI",name:"cfdi-code",isRequired:!0,type:"select",options:["G01-Adquisici\xf3n de mercanc\xedas","G02-Devoluciones descuentos o bonificaciones","G03-Gastos en general","I01-Construcciones","I02-Mobilario y equipo de oficina por inversiones","I03-Equipo de transporte","I04-Equipo de c\xf3mputo y accesorios","I05-Dados, troqueles, moldes, matrices y herramental","I06-Comunicaciones telef\xf3nicas","I07-Comunicaciones satelitales","I08-Otra maquinaria y equipo","D01-Honorarios m\xe9dicos, dentales y gastos hospitalarios","D02-Gastos m\xe9dicos por incapacidad o discapacidad","D03-Gastos funerales","D04-Donativos","D05-Intereses reales efectivamente pagados por cr\xe9ditos hipotecarios (casa habitaci\xf3n)","D06-Aportaciones voluntarias al SAR","D07-Primas por seguros de gastos m\xe9dicos","D08-Gastos de transportaci\xf3n escolar obligatoria","D09-Dep\xf3sitos en cuentas para el ahorro, primas que tengan como base planes de pensiones","D10-Pagos por servicios educativos (colegiaturas)","P01-Por definir","S01-Sin Efectos Fiscales","CP01-Pagos","CN01-N\xf3mina"],suboptions:[["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","606-Arrendamiento","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","607-R\xe9gimen de Enajenaci\xf3n o Adquisici\xf3n de Bienes","615-R\xe9gimen de los ingresos por obtenci\xf3n de premios","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas",],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","610-Residentes en el Extranjero sin Establecimiento Permanente en M\xe9xico","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","616-Sin obligaciones fiscales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","624-Coordinados","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["601-General de Ley Personas Morales","603-Personas Morales con Fines no Lucrativos","605-Sueldos y Salarios e Ingresos Asimilados a Salarios","606-Arrendamiento","608-Dem\xe1s ingresos","610-Residentes en el Extranjero sin Establecimiento Permanente en M\xe9xico","611-Ingresos por Dividendos (socios y accionistas)","612-Personas F\xedsicas con Actividades Empresariales y Profesionales","614-Ingresos por intereses","616-Sin obligaciones fiscales","620-Sociedades Cooperativas de Producci\xf3n que optan por diferir sus ingresos","621-Incorporaci\xf3n Fiscal","622-Actividades Agr\xedcolas, Ganaderas, Silv\xedcolas y Pesqueras","623-Opcional para Grupos de Sociedades","624-Coordinados","625-R\xe9gimen de las Actividades Empresariales con ingresos a trav\xe9s de Plataformas Tecnol\xf3gicas","626-R\xe9gimen Simplificado de Confianza"],["605-Sueldos y Salarios e Ingresos Asimilados a Salarios"]]}];window.onload=function(){onMutation(),setTimeout(()=>{onDefaultInformation()},2e3)};const onDefaultInformation=()=>{if(vtexjs){let e=vtexjs?.checkout?.orderForm?.customData?.customApps||[];e.length||onForceData()}},onForceData=()=>{let e=vtexjs?.checkout?.orderForm?.storePreferencesData?.countryCode;setCustomData({field:"isCorporateOms",app:appName,value:"false"}),setCustomData({field:"Country-Code",app:appName,value:e}),setCustomData({field:"CFDI-required",app:appName,value:"false"})},onMutation=()=>{let e=document.querySelector("body"),a=new MutationObserver(e=>{try{onAttachmentB2BButton()}catch(a){}});a.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})};$(document).ready(function(){setTimeout(()=>{let e=sessionStorage.getItem("b2b-form-complete");e||(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),onForceData())},1e3)}),$(window).on("hashchange",function(e){setTimeout(()=>{window?.location?.hash==="#/profile"&&$("#b2b-form-container").length&&($("#b2b-form-container").remove(),$(".container-custom-data-form").remove(),$("#button-b2b-form").remove(),$("#b2b-form-container").remove()),window?.location?.hash==="#/profile"&&(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),onForceData())},1e3)});const onAttachmentB2BButton=()=>{let profileContainer=$(".form-step.box-edit > .box-client-info > .row-fluid"),b2bButton=$("#b2b-form-container");profileContainer&&profileContainer.length&&!b2bButton.length&&window?.location?.hash==="#/profile"&&(window?.location?.hash==="#/profile"&&(removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),onForceData()),$(".corporate-hide-link").css("display","none"),$(".form-step.box-edit > .box-client-info > .row-fluid").append(`
            <div id="b2b-form-container">
                <div>
                    <span>\xbfRequieres Factura?</span>
                    <div style="display:flex;margin-top:10px">
                        <p style="display:flex;align-items: center;">
                            <input type="radio" id="CFDI-si" value="true" name="cfdi" style="margin-top: 0"/>
                            <label for="CFDI-si" style="line-height: 3px;margin-left: 5px;">Si</label>
                        </p>
                        <p style="display:flex;align-items: center;margin-left: 15px;">
                            <input type="radio" id="CFDI-no" value="false" name="cfdi" style="margin-top: 0"/>
                            <label for="CFDI-no" style="line-height: 3px;margin-left: 5px;">No</label>
                        </p>
                    </div>
                </div>
            </div>
 
        `),setTimeout(()=>{$("#CFDI-no").click()},1500),$('input[name="cfdi"]').change(function(){if($(this).is(":checked")){var val=eval($(this).val());let buttonb2bform=$("#button-b2b-form");if(setCustomData({field:"CFDI-required",app:appName,value:val}),val){$("#go-to-shipping, #go-to-payment").prop("disabled",!0);let fieldsToMap=FIELD_CFDI.map(e=>`<p class="${e.name} input text containerInputCustom">
                        <label for="${e.name}"  class="labelInputCustom">${e.label}</label>
                        <select name="${e.name}" id="${e.name}" onChange="onChangeB2bCFDI('${e.name}')">
                            <option disabled selected>Seleccione</option>
                          ${e.options.map(e=>`<option value="${e}">${e}</option>`)}
                        </select>
                      </p>`);setTimeout(()=>{$("#b2b-form-container").after(`<div class="container-custom-data-form">
                            ${fieldsToMap.toString().replace(/,/g,"")}
                            <p class="tax-regime input text containerInputCustom">
                                <label for="tax-regime"  class="labelInputCustom">R\xe9gimen Fiscal</label>
                                <select name="tax-regime" id="tax-regime" onChange="onChangeB2bRegimen('tax-regime')">
                                    <option disabled selected>Seleccione</option>
                                </select>
                            </p>
                        </div>`)},100),buttonb2bform&&buttonb2bform.length?$("#button-b2b-form").html(`
                            <div class="container-custom-data-form-facturacion">
                                <span>\xbfTipo de persona?</span>
                                <div style="display:flex;margin-top:10px">
                                    <p style="display:flex;align-items: center;">
                                        <input type="radio" id="corporative-si" value="true" name="corporative" style="margin-top: 0"/>
                                        <label for="corporative-si" style="line-height: 3px;margin-left: 5px;">Moral</label>
                                    </p>
                                    <p style="display:flex;align-items: center;margin-left: 15px;">
                                        <input type="radio" id="corporative-no" value="false" name="corporative" style="margin-top: 0"/>
                                        <label for="corporative-no" style="line-height: 3px;margin-left: 5px;">F\xedsica</label>
                                    </p>
                                </div>
                            </div>
                        `):$("#b2b-form-container").after(`
                            <div id="button-b2b-form" style="margin-top:10px;cursor:pointer">
                                <div>
                                    <span>\xbfTipo de persona?</span>
                                    <div style="display:flex;margin-top:10px">
                                        <p style="display:flex;align-items: center;">
                                            <input type="radio" id="corporative-si" value="true" name="corporative" style="margin-top: 0"/>
                                            <label for="corporative-si" style="line-height: 3px;margin-left: 5px;">Moral</label>
                                        </p>
                                        <p style="display:flex;align-items: center;margin-left: 15px;">
                                            <input type="radio" id="corporative-no" value="false" name="corporative" style="margin-top: 0"/>
                                            <label for="corporative-no" style="line-height: 3px;margin-left: 5px;">F\xedsica</label>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        `),$('input[name="corporative"]').change(function(){if($(this).is(":checked")){var val=eval($(this).val());setCustomData({field:"isCorporateOms",app:appName,value:val}),typeInput=val?"Moral":"Fisica",$(".container-custom-data-form-element").remove(),val?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),resetInformation(),setFormCustom()):($("#go-to-shipping, #go-to-payment").prop("disabled",!0),resetInformation(),setFormCustomDefault())}})}else $("#go-to-shipping, #go-to-payment").prop("disabled",!1),$("#button-b2b-form").length&&$("#button-b2b-form").remove(),$(".container-custom-data-form").remove(),removeCustomData("zipcode"),removeCustomData("tax-regime"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("cfdi-code"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC"),setCustomData({field:"CFDI-required",app:appName,value:"false"})}}))},resetInformation=()=>{removeCustomData("zipcode"),removeCustomData("phone-new"),removeCustomData("payment-code"),removeCustomData("number-dep"),removeCustomData("number"),removeCustomData("neighborhood"),removeCustomData("isCorporateOms"),removeCustomData("city"),removeCustomData("business-name"),removeCustomData("business-line"),removeCustomData("address"),removeCustomData("RFC")},setFormCustomDefault=()=>{"#/profile"===window.location.hash&&setTimeout(()=>{let e=$("#button-b2b-form"),a=$(".container-custom-data-form-element");if(e.length){let s=fieldsNormal.map(e=>"select"===e.type?`<p class="${e.name} input text containerInputCustom">
                <label for="${e.name}"  class="labelInputCustom">${e.label}</label>
                <select name="${e.name}" id="${e.name}" onChange="onChangeB2b('${e.name}')">
                    <option disabled selected>Seleccione</option>
                  ${e.options.map(e=>`<option value="${e}">${e}</option>`)}
                </select>
              </p>`:`<p class="${e.name} input text containerInputCustom">
              <label for="${e.name}"  class="labelInputCustom">${e.label}</label>
              <input type="${e.type}" autocomplete="off" id="${e.name}" class="input-xlarge" name="${e.name}" onBlur="onBlurB2bForm('${e.name}')"/>
              <span class="input-b2b-error"></span>
              ${e?.message?`<span>${e?.message}</span>`:""}
            </p>`);a&&a.length?$(".container-custom-data-form-element").html(s.toString().replace(/,/g,"")):e.append(`<div class="container-custom-data-form-element FISICA">${s.toString().replace(/,/g,"")}</div>`)}},500)},setFormCustom=()=>{"#/profile"===window.location.hash&&setTimeout(()=>{let e=$("#button-b2b-form"),a=$(".container-custom-data-form-element");if(e.length){let s=fields.map(e=>"select"===e.type?`<p class="${e.name} input text containerInputCustom">
                <label for="${e.name}"  class="labelInputCustom">${e.label}</label>
                <select name="${e.name}" id="${e.name}" onChange="onChangeB2b('${e.name}')">
                    <option disabled selected>Seleccione</option>
                  ${e.options.map(e=>`<option value="${e}">${e}</option>`)}
                </select>
              </p>`:"label"===e.type?`
                            <p class="${e.label} input text containerInputCustom">
                                <label>${e.label}</label>
                            </p>
                        `:`<p class="${e.name} input text containerInputCustom">
              <label for="${e.name}"  class="labelInputCustom">${e.label}</label>
              <input type="${e.type}" autocomplete="off" id="${e.name}" class="input-xlarge" name="${e.name}" onBlur="onBlurB2bForm('${e.name}')"/>
              <span class="input-b2b-error"></span>
              ${e?.message?`<span>${e?.message}</span>`:""}
            </p>`);a&&a.length?$(".container-custom-data-form-element").html(s.toString().replace(/,/g,"")):e.append(`<div class="container-custom-data-form-element MORAL">${s.toString().replace(/,/g,"")}</div>`)}},500)},onChangeB2bRegimen=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;if(s&&setCustomData({field:e,app:appName,value:s.split("-")[0]}),"Moral"===typeInput){let o=fields.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||!o||!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});o?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}else{let i=fieldsNormal.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||!o||!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});i?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}},onChangeB2bCFDI=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;if($("#corporative-si").is(":checked"),$("#corporative-no").is(":checked"),s){function o(e){return e.trim().normalize("NFD").replace(/,/gi,"").normalize()}let i=FIELD_CFDI[0].options.findIndex(e=>o(e)===o(s)),n=FIELD_CFDI[0].suboptions[i],r=n.map(e=>`<option value="${e}">${e}</option>`);if($("#tax-regime").html(`
            <option disabled selected>Seleccione</option>
            ${r.join("")}
        `),setCustomData({field:e,app:appName,value:s.split("-")[0]}),"Moral"===typeInput){let t=fields.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||!o||!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});t?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}else{let l=fieldsNormal.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||!o||!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});l?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true"))}}},onChangeB2b=e=>{var a=document.getElementById(e),s=a.options[a.selectedIndex].value;s&&setCustomData({field:e,app:appName,value:s.split("-")[0]})},onValidateInput=e=>{},onValidateButton=()=>{type},onBlurB2bForm=e=>{$("#go-to-shipping");let a=$(`#${e}`),s=fields.find(a=>a.name===e)?.type,o=fields.find(a=>a.name===e)?.isRequired;if("checkbox"===s){let i=$("#CFDI-required").is(":checked");i||a.length&&!$(`.${e} .errorCustom`).length&&o&&$(`.${e}`).append('<div class="help error errorCustom">Este campo es obligatorio</div>')}else{let n=a.val(),r=$(`.${e} .errorCustom`);if(n){if(r.length&&r.hide(),"Moral"===typeInput){let t=fields.some(a=>{let s=RegExp(a.regex);return a.name===e&&!!a.regex&&!s.test($(`#${a.name}`).val())||(a.name!==e||!!a.isRequired)&&a.name===e&&!$(`#${a.name}`).val()}),l=fields.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!s||!o||!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});l?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),t?$(`#${e} + .input-b2b-error`).html('<span style="color: red">Campo incompleto</span><br/>'):$(`#${e} + .input-b2b-error`).html("")}else{let d=fieldsNormal.some(a=>{let s=RegExp(a.regex);return a.name===e&&!!a.regex&&!s.test($(`#${a.name}`).val())||(a.name!==e||!!a.isRequired)&&a.name===e&&!$(`#${a.name}`).val()}),c=fieldsNormal.some(e=>{let a=RegExp(e.regex),s=$("#cfdi-code").val(),o=$("#tax-regime").val();return!(s&&o&&(!e.regex||a.test($(`#${e.name}`).val())))||!!e.isRequired&&!$(`#${e.name}`).val()});c?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),d?$(`#${e} + .input-b2b-error`).html('<span style="color: red">Campo incompleto</span><br/>'):$(`#${e} + .input-b2b-error`).html("")}setCustomData({field:e,app:appName,value:n})}else{let m=fields.some(e=>{let a=RegExp(e.regex);return!!e.isRequired&&(!!e.regex&&!a.test($(`#${e.name}`).val())||!$(`#${e.name}`).val())});a.length&&!$(`.${e} .errorCustom`).length&&o&&$(`.${e}`).append('<div class="help error errorCustom">Este campo es obligatorio</div>'),m?($("#go-to-shipping, #go-to-payment").prop("disabled",!0),sessionStorage.removeItem("b2b-form-complete")):($("#go-to-shipping, #go-to-payment").removeProp("disabled"),sessionStorage.setItem("b2b-form-complete","true")),removeCustomData(e)}}},validateErrors=()=>{let e=fields.map(e=>{let a=e.name,s=e.isRequired,o=$(`#${a}`).val();return!!s&&!o}),a=e.some(function(e){return!0===e});return a},removeCustomData=e=>{let a=vtexjs?.checkout?.orderFormId;fetch(`/api/checkout/pub/orderForm/${a}/customData/${appName}/${e}`,{method:"DELETE"})},setCustomData=e=>{setTimeout(()=>{let a=vtexjs?.checkout?.orderFormId;fetch(`/api/checkout/pub/orderForm/${a}/customData/${e.app}/${e.field}`,{method:"PUT",body:JSON.stringify({value:e.value}),headers:{"Content-Type":"application/json"}})},100)};